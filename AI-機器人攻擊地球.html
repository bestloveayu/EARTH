<input type="text" name="entry.123456789" ...>
   <!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🤖 AI機器人攻擊地球 - 拯救地球大作戰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; }
        .health-bar {
            transition: all 0.8s ease;
        }
        .damage-animation {
            animation: shake 0.5s ease-in-out;
        }
        .heal-animation {
            animation: glow 0.8s ease-in-out;
        }
        .explosion-animation {
            animation: explosion 1s ease-in-out;
        }
        .shield-animation {
            animation: shield 1s ease-in-out;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(34, 197, 94, 0.5); }
            50% { box-shadow: 0 0 20px rgba(34, 197, 94, 0.8); }
        }
        @keyframes explosion {
            0% { transform: scale(1); background-color: rgba(239, 68, 68, 0.1); }
            50% { transform: scale(1.05); background-color: rgba(239, 68, 68, 0.3); }
            100% { transform: scale(1); background-color: rgba(239, 68, 68, 0.1); }
        }
        @keyframes shield {
            0% { transform: scale(1); background-color: rgba(34, 197, 94, 0.1); }
            50% { transform: scale(1.02); background-color: rgba(34, 197, 94, 0.3); }
            100% { transform: scale(1); background-color: rgba(34, 197, 94, 0.1); }
        }
        .earth-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 50%, #1e1b4b 100%);
        }
        .robot-attack {
            animation: robotAttack 2s infinite;
        }
        @keyframes robotAttack {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body class="earth-bg min-h-screen text-white">
    <div class="container mx-auto px-4 py-8">
        <!-- 標題 -->
        <div class="text-center mb-8">
            <h1 class="text-5xl font-bold text-yellow-400 mb-4 robot-attack">🤖 AI機器人攻擊地球</h1>
            <h2 class="text-2xl font-bold text-red-400 mb-2">🌍 拯救地球大作戰</h2>
            <p class="text-blue-200">邪惡的AI機器人正在攻擊地球！身為AI科學家的你，必須答對題目才能拯救人類！</p>
        </div>

        <!-- 主選單 -->
        <div id="mainMenu" class="max-w-2xl mx-auto">
            <!-- 玩家資訊輸入 -->
            <div id="playerInfo" class="bg-gray-900 bg-opacity-80 rounded-xl shadow-lg p-8 mb-6 border border-blue-400">
                <h2 class="text-2xl font-bold text-center mb-6 text-yellow-400">🚀 準備迎戰</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-blue-200 mb-2">學號：</label>
                        <input type="text" id="studentId" class="w-full p-3 rounded-lg bg-gray-800 text-white border border-gray-600 focus:border-blue-400" placeholder="請輸入學號">
                    </div>
                    <div>
                        <label class="block text-blue-200 mb-2">姓名：</label>
                        <input type="text" id="playerName" class="w-full p-3 rounded-lg bg-gray-800 text-white border border-gray-600 focus:border-blue-400" placeholder="請輸入姓名">
                    </div>
                    <button onclick="startGame()" class="w-full bg-red-600 hover:bg-red-700 text-white py-4 px-6 rounded-lg transition-all text-xl font-bold">
                        🛡️ 開始拯救地球！
                    </button>
                </div>
            </div>

            <div id="difficultySelect" class="hidden bg-gray-900 bg-opacity-80 rounded-xl shadow-lg p-8 mb-6 border border-blue-400">
                <h2 class="text-2xl font-bold text-center mb-6 text-yellow-400">選擇戰鬥難度</h2>
                
                <!-- 難度選擇 -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <button onclick="selectDifficulty('easy')" class="difficulty-btn bg-green-600 hover:bg-green-700 text-white p-4 rounded-lg transition-all transform hover:scale-105 border border-green-400">
                        <div class="text-xl font-bold">⚡ 新手戰士</div>
                        <div class="text-sm">是非題挑戰</div>
                    </button>
                    <button onclick="selectDifficulty('medium')" class="difficulty-btn bg-orange-600 hover:bg-orange-700 text-white p-4 rounded-lg transition-all transform hover:scale-105 border border-orange-400">
                        <div class="text-xl font-bold">🔥 精英戰士</div>
                        <div class="text-sm">單選題挑戰</div>
                    </button>
                    <button onclick="selectDifficulty('hard')" class="difficulty-btn bg-red-600 hover:bg-red-700 text-white p-4 rounded-lg transition-all transform hover:scale-105 border border-red-400">
                        <div class="text-xl font-bold">💀 終極戰士</div>
                        <div class="text-sm">混合題挑戰</div>
                    </button>
                </div>
            </div>
        </div>

        <!-- 遊戲介面 -->
        <div id="gameInterface" class="hidden max-w-4xl mx-auto">
            <!-- 血量和戰況 -->
            <div class="bg-gray-900 bg-opacity-90 rounded-xl shadow-lg p-6 mb-6 border border-red-400">
                <div class="flex justify-between items-center mb-4">
                    <div class="text-lg font-semibold text-blue-200">
                        🌍 地球防衛戰 - 第 <span id="currentQuestion">1</span> / <span id="totalQuestions">10</span> 波攻擊
                    </div>
                    <div class="text-lg font-semibold text-yellow-400">
                        ⚡ 能量: <span id="currentHealth">50</span>
                    </div>
                </div>
                
                <!-- 血量條 -->
                <div class="w-full bg-gray-700 rounded-full h-6 mb-4 border border-gray-500">
                    <div id="healthBar" class="health-bar bg-orange-500 h-6 rounded-full flex items-center justify-center text-white text-sm font-bold" style="width: 100%">
                        <span id="healthText">抗衡中</span>
                    </div>
                </div>
                
                <!-- 戰況提示 -->
                <div class="text-center">
                    <div id="battleStatus" class="text-lg font-bold text-orange-400">⚔️ 你正努力與AI機器人抗衡，目前勉強撐得住!</div>
                </div>
            </div>

            <!-- 題目卡片 -->
            <div class="bg-gray-900 bg-opacity-90 rounded-xl shadow-lg p-8 mb-6 border border-blue-400">
                <div id="questionCard">
                    <h3 class="text-xl font-bold mb-6 text-yellow-400" id="questionText">🤖 機器人正在攻擊...</h3>
                    <div id="optionsContainer" class="space-y-3">
                        <!-- 選項會動態生成 -->
                    </div>
                </div>
                
                <!-- 答案反饋 -->
                <div id="feedback" class="hidden mt-6 p-4 rounded-lg border-2">
                    <div id="feedbackText" class="font-bold mb-3 text-lg"></div>
                    <div id="explanation" class="text-blue-200 mb-4 p-3 bg-gray-800 rounded-lg"></div>
                    <button onclick="nextQuestion()" class="bg-blue-600 hover:bg-blue-700 text-white py-3 px-8 rounded-lg transition-all font-bold">
                        🚀 迎戰下一波攻擊 →
                    </button>
                </div>
            </div>
        </div>

        <!-- 結果頁面 -->
        <div id="resultsPage" class="hidden max-w-2xl mx-auto">
            <div class="bg-gray-900 bg-opacity-90 rounded-xl shadow-lg p-8 text-center border border-green-400">
                <h2 class="text-4xl font-bold mb-6 text-green-400">🎉 地球保衛戰結束！</h2>
                
                <!-- 最終戰況 -->
                <div class="mb-6">
                    <div class="text-2xl mb-4 text-yellow-400">🏆 最終戰果</div>
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-green-900 bg-opacity-50 p-4 rounded-lg border border-green-400">
                            <div class="text-3xl font-bold text-green-400" id="finalCorrect">0</div>
                            <div class="text-sm text-green-200">成功抵擋</div>
                        </div>
                        <div class="bg-red-900 bg-opacity-50 p-4 rounded-lg border border-red-400">
                            <div class="text-3xl font-bold text-red-400" id="finalWrong">0</div>
                            <div class="text-sm text-red-200">被機器人攻擊</div>
                        </div>
                    </div>
                    <div class="bg-blue-900 bg-opacity-50 p-4 rounded-lg border border-blue-400 mb-4">
                        <div class="text-3xl font-bold text-blue-400" id="finalHealth">100</div>
                        <div class="text-sm text-blue-200">最終地球能量</div>
                    </div>
                </div>

                <!-- 成就稱號 -->
                <div class="mb-6">
                    <div class="text-xl font-semibold mb-2 text-purple-300">🏅 獲得稱號</div>
                    <div id="achievementTitle" class="text-3xl font-bold text-purple-400 mb-2">地球守護者</div>
                    <div id="achievementDesc" class="text-blue-200">你成功保護了地球！</div>
                </div>

                <button onclick="backToMenu()" class="bg-blue-600 hover:bg-blue-700 text-white py-3 px-8 rounded-lg transition-all font-bold">
                    🔄 重新挑戰
                </button>
            </div>
        </div>

        <!-- 地球毀滅頁面 -->
        <div id="gameOverPage" class="hidden max-w-2xl mx-auto">
            <div class="bg-red-900 bg-opacity-90 rounded-xl shadow-lg p-8 text-center border border-red-500">
                <h2 class="text-4xl font-bold mb-6 text-red-400">💥 地球毀滅！</h2>
                <div class="text-6xl mb-6">🌍💥🤖</div>
                <p class="text-xl text-red-200 mb-6">AI機器人征服了地球...人類文明終結了！</p>
                <p class="text-lg text-gray-300 mb-8">但是，身為AI科學家的你還有機會重新來過！</p>
                
                <button onclick="restartGame()" class="bg-red-600 hover:bg-red-700 text-white py-4 px-8 rounded-lg transition-all font-bold text-xl">
                    🔄 重新拯救地球
                </button>
            </div>
        </div>


    </div>

    <script>
        // 遊戲狀態
        let gameState = {
            currentDifficulty: '',
            currentQuestionIndex: 0,
            health: 100,
            correctAnswers: 0,
            wrongAnswers: 0,
            totalQuestions: 0,
            questions: [],
            playerName: '',
            studentId: '',
            startTime: null,
            answers: []
        };

        // AI題目庫
        const aiQuestions = {
            easy: [
                {
                    question: "AI 人工智慧技術的應用與發展，得助於電腦科技與網路快速與準確計算能力，逐漸深入影響人類許多層面",
                    type: "truefalse",
                    correct: true,
                    explanation: "正確！AI技術確實依賴電腦科技與網路的快速計算能力，並且正在深入影響人類生活的各個層面。"
                },
                {
                    question: "給機器人裝上「大腦晶片」，是目前智慧型機器人的研發方向",
                    type: "truefalse",
                    correct: true,
                    explanation: "正確！現代智慧型機器人的發展確實朝向裝載更強大的處理器和AI晶片方向發展。"
                },
                {
                    question: "未來人類有可能研發與製造出真正能推理和解決問題的智慧型機器，並且這樣的機器將具有有知覺的、有自我意識的機器，這是專用人工智慧的觀點",
                    type: "truefalse",
                    correct: false,
                    explanation: "錯誤！這描述的是通用人工智慧(AGI)的觀點，不是專用人工智慧(ANI)。專用AI只能處理特定任務。"
                },
                {
                    question: "AI 人工智慧技術的應用與發展，一方面促進了電腦與網路工業的發展；另一方面，也帶來了新的工作需求及勞務就業問題",
                    type: "truefalse",
                    correct: true,
                    explanation: "正確！AI發展確實促進了相關產業發展，同時也帶來就業結構的改變和新的挑戰。"
                },
                {
                    question: "弱人工智慧(weak AI)，又稱為專用人工智慧(ANI, artificial narrow intelligence)",
                    type: "truefalse",
                    correct: true,
                    explanation: "正確！弱人工智慧和專用人工智慧是同一個概念，指只能處理特定任務的AI系統。"
                }
            ],
            medium: [
                {
                    question: "人工智慧經常被稱為世界三大尖端技術之一，下列說法中錯誤的是______",
                    type: "multiple",
                    options: [
                        "A: 空間技術、能源技術、人工智慧",
                        "B: 管理技術、工程技術、人工智慧",
                        "C: 基因工程、奈米科學、人工智慧",
                        "D: 人工智慧已成為一個獨立的學科分支，無論在理論和實踐上都已自成系統"
                    ],
                    correct: 1,
                    explanation: "答案是B。管理技術和工程技術不屬於世界三大尖端技術，通常指的是空間技術、能源技術和人工智慧。"
                },
                {
                    question: "作為電腦科學的一個分支，人工智慧的英文縮寫是_______",
                    type: "multiple",
                    options: [
                        "A: CPU",
                        "B: AI",
                        "C: BI",
                        "D: DI"
                    ],
                    correct: 1,
                    explanation: "答案是B。AI是Artificial Intelligence的縮寫，即人工智慧。"
                },
                {
                    question: "人工智慧領域中，AIoT 代表_______",
                    type: "multiple",
                    options: [
                        "A: 智慧製造",
                        "B: 人工智慧物聯網",
                        "C: 機器學習",
                        "D: 智慧城市"
                    ],
                    correct: 1,
                    explanation: "答案是B。AIoT是AI + IoT的結合，代表人工智慧物聯網，將AI技術與物聯網結合。"
                },
                {
                    question: "如果把人工智慧的發展層次分成運算資源基礎、核心技術發展與應用領域等層次，智慧機器人(intelligent robot)是屬於______",
                    type: "multiple",
                    options: [
                        "A: 運算資源基礎",
                        "B: 核心技術發展",
                        "C: 應用領域",
                        "D: 以上皆是"
                    ],
                    correct: 2,
                    explanation: "答案是C。智慧機器人是AI技術的具體應用，屬於應用領域層次。"
                }
            ],
            hard: [
                // 是非題 (5題)
                {
                    question: "強人工智慧(AGI)目前已經完全實現，並廣泛應用於各個領域",
                    type: "truefalse",
                    correct: false,
                    explanation: "錯誤！強人工智慧(AGI)目前尚未完全實現，現在的AI大多屬於專用人工智慧(ANI)。"
                },
                {
                    question: "機器學習是人工智慧的一個重要分支，讓機器能夠從資料中自動學習",
                    type: "truefalse",
                    correct: true,
                    explanation: "正確！機器學習確實是AI的重要分支，能讓機器從大量資料中學習模式和規律。"
                },
                {
                    question: "深度學習只能處理圖像識別問題，無法應用於其他領域",
                    type: "truefalse",
                    correct: false,
                    explanation: "錯誤！深度學習可以應用於語音識別、自然語言處理、推薦系統等多個領域。"
                },
                {
                    question: "人工神經網路的設計靈感來自於人類大腦的神經元結構",
                    type: "truefalse",
                    correct: true,
                    explanation: "正確！人工神經網路確實是模仿人腦神經元的連接方式和信息處理機制設計的。"
                },
                {
                    question: "AI倫理問題只需要技術人員考慮，與一般民眾無關",
                    type: "truefalse",
                    correct: false,
                    explanation: "錯誤！AI倫理問題涉及整個社會，需要技術人員、政策制定者和一般民眾共同關注。"
                },
                // 選擇題 (8題)
                {
                    question: "強人工智慧AGI 強調人工智慧的完整性，下列_____不屬於強人工智慧",
                    type: "multiple",
                    options: [
                        "A: （類人）機器的思考和推理就像人的思維一樣",
                        "B: （非類人）機器產生了和人完全不一樣的知覺和意識",
                        "C: 車牌辨識系統",
                        "D: 新一代自動駕駛車"
                    ],
                    correct: 2,
                    explanation: "答案是C。車牌辨識系統是專用AI，只能處理特定任務，不屬於強人工智慧。"
                },
                {
                    question: "如果把人工智慧的發展層次分成運算資源基礎、核心技術發展與應用領域等層次，深度學習(deep learning)是屬於_______",
                    type: "multiple",
                    options: [
                        "A: 運算資源基礎",
                        "B: 核心技術發展",
                        "C: 應用領域",
                        "D: 以上皆是"
                    ],
                    correct: 1,
                    explanation: "答案是B。深度學習是AI的核心技術之一，屬於核心技術發展層次。"
                },
                {
                    question: "如果將人工智慧分成運算資源基礎、核心技術發展與應用領域等層次，無人自動駕駛車(self-driving car)是屬於________",
                    type: "multiple",
                    options: [
                        "A: 運算資源基礎",
                        "B: 核心技術發展",
                        "C: 應用領域",
                        "D: 以上皆是"
                    ],
                    correct: 2,
                    explanation: "答案是C。無人自動駕駛車是AI技術的具體應用，屬於應用領域層次。"
                },
                {
                    question: "人工智慧是研究、開發用於模擬、延伸和擴展人的智慧的理論、方法、技術及應用系統的一門交叉科學人工智慧是一門極富挑戰性的_____技術科學",
                    type: "multiple",
                    options: [
                        "A: 研究型",
                        "B: 自然型與社會型",
                        "C: 應用型",
                        "D: 研究型與應用型"
                    ],
                    correct: 3,
                    explanation: "答案是D。人工智慧既有深厚的理論研究基礎，也有廣泛的實際應用，是研究型與應用型並重的技術科學。"
                },
                {
                    question: "在機器學習中，監督式學習需要什麼樣的資料？",
                    type: "multiple",
                    options: [
                        "A: 只需要輸入資料",
                        "B: 需要標記好的訓練資料",
                        "C: 只需要輸出結果",
                        "D: 不需要任何資料"
                    ],
                    correct: 1,
                    explanation: "答案是B。監督式學習需要有標記的訓練資料，包含輸入和對應的正確輸出。"
                },
                {
                    question: "下列哪個不是深度學習的常見應用？",
                    type: "multiple",
                    options: [
                        "A: 圖像識別",
                        "B: 語音識別",
                        "C: 機械維修",
                        "D: 自然語言處理"
                    ],
                    correct: 2,
                    explanation: "答案是C。機械維修主要依靠人工技能和經驗，不是深度學習的典型應用領域。"
                },
                {
                    question: "AI倫理中最重要的考量因素是什麼？",
                    type: "multiple",
                    options: [
                        "A: 技術效率",
                        "B: 成本控制",
                        "C: 公平性和透明度",
                        "D: 市場競爭力"
                    ],
                    correct: 2,
                    explanation: "答案是C。AI倫理最重要的是確保公平性、透明度和對人類社會的正面影響。"
                },
                {
                    question: "大數據在AI發展中的主要作用是什麼？",
                    type: "multiple",
                    options: [
                        "A: 提供儲存空間",
                        "B: 提供訓練資料和模式識別基礎",
                        "C: 降低運算成本",
                        "D: 提高網路速度"
                    ],
                    correct: 1,
                    explanation: "答案是B。大數據為AI提供豐富的訓練資料，是機器學習和模式識別的重要基礎。"
                }
            ]
        };

        // 成就系統
        const achievements = {
            destroyed: { title: "地球毀滅者", desc: "地球被機器人征服了...", minHealth: 0, maxHealth: 0 },
            survivor: { title: "倖存者", desc: "勉強保住了地球", minHealth: 1, maxHealth: 29 },
            defender: { title: "地球守護者", desc: "成功抵禦了機器人攻擊", minHealth: 30, maxHealth: 59 },
            hero: { title: "人類英雄", desc: "完美保護了地球！", minHealth: 60, maxHealth: 200 }
        };

        // 開始遊戲
        function startGame() {
            const studentId = document.getElementById('studentId').value.trim();
            const playerName = document.getElementById('playerName').value.trim();
            
            if (!studentId || !playerName) {
                alert('請輸入學號和姓名！');
                return;
            }
            
            gameState.studentId = studentId;
            gameState.playerName = playerName;
            
            document.getElementById('playerInfo').classList.add('hidden');
            document.getElementById('difficultySelect').classList.remove('hidden');
        }

        // 選擇難度
        function selectDifficulty(difficulty) {
            gameState.currentDifficulty = difficulty;
            gameState.questions = aiQuestions[difficulty] || [];
            
            gameState.totalQuestions = gameState.questions.length;
            gameState.currentQuestionIndex = 0;
            gameState.health = 50;
            gameState.correctAnswers = 0;
            gameState.wrongAnswers = 0;
            gameState.startTime = new Date();
            gameState.answers = [];
            
            document.getElementById('mainMenu').classList.add('hidden');
            document.getElementById('gameInterface').classList.remove('hidden');
            
            updateUI();
            showQuestion();
        }

        // 顯示題目
        function showQuestion() {
            const question = gameState.questions[gameState.currentQuestionIndex];
            document.getElementById('questionText').textContent = `🤖 第${gameState.currentQuestionIndex + 1}波攻擊：${question.question}`;
            
            const container = document.getElementById('optionsContainer');
            container.innerHTML = '';
            
            if (question.type === 'truefalse') {
                // 是非題
                const trueBtn = document.createElement('button');
                trueBtn.className = 'w-full text-left p-4 border-2 border-green-400 bg-green-900 bg-opacity-30 rounded-lg hover:bg-green-700 hover:bg-opacity-50 transition-all text-white font-semibold';
                trueBtn.textContent = '✅ 正確 (O)';
                trueBtn.onclick = () => selectAnswer(true);
                container.appendChild(trueBtn);
                
                const falseBtn = document.createElement('button');
                falseBtn.className = 'w-full text-left p-4 border-2 border-red-400 bg-red-900 bg-opacity-30 rounded-lg hover:bg-red-700 hover:bg-opacity-50 transition-all text-white font-semibold';
                falseBtn.textContent = '❌ 錯誤 (X)';
                falseBtn.onclick = () => selectAnswer(false);
                container.appendChild(falseBtn);
            } else {
                // 單選題
                question.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.className = 'w-full text-left p-4 border-2 border-blue-400 bg-blue-900 bg-opacity-30 rounded-lg hover:bg-blue-700 hover:bg-opacity-50 transition-all text-white';
                    button.textContent = option;
                    button.onclick = () => selectAnswer(index);
                    container.appendChild(button);
                });
            }
            
            document.getElementById('feedback').classList.add('hidden');
        }

        // 選擇答案
        function selectAnswer(selectedAnswer) {
            const question = gameState.questions[gameState.currentQuestionIndex];
            const isCorrect = selectedAnswer === question.correct;
            
            // 記錄答案
            gameState.answers.push({
                questionIndex: gameState.currentQuestionIndex,
                selectedAnswer: selectedAnswer,
                correctAnswer: question.correct,
                isCorrect: isCorrect,
                timestamp: new Date()
            });
            
            if (isCorrect) {
                gameState.correctAnswers++;
                gameState.health += 10; // 答對回復10點能量
                showFeedback(true, question.explanation);
            } else {
                gameState.wrongAnswers++;
                gameState.health -= 10; // 答錯扣10點能量
                showFeedback(false, question.explanation);
                
                // 檢查是否血量歸零
                if (gameState.health <= 0) {
                    gameState.health = 0;
                    setTimeout(() => {
                        showGameOver();
                    }, 2000);
                    return;
                }
            }
            
            // 更新UI
            updateUI();
            
            // 禁用選項按鈕
            const buttons = document.querySelectorAll('#optionsContainer button');
            buttons.forEach(btn => {
                btn.disabled = true;
                btn.classList.add('opacity-50');
            });
        }

        // 顯示反饋
        function showFeedback(isCorrect, explanation) {
            const feedback = document.getElementById('feedback');
            const feedbackText = document.getElementById('feedbackText');
            const explanationText = document.getElementById('explanation');
            const gameInterface = document.getElementById('gameInterface');
            
            if (isCorrect) {
                feedback.className = 'mt-6 p-4 rounded-lg border-2 border-green-400 bg-green-900 bg-opacity-50 heal-animation';
                feedbackText.textContent = '🛡️ 選擇正確，你成功擋住機器人攻擊，地球回復10點能量!';
                feedbackText.className = 'font-bold mb-3 text-lg text-green-400';
                
                // 添加護盾動畫效果
                gameInterface.classList.add('shield-animation');
                setTimeout(() => {
                    gameInterface.classList.remove('shield-animation');
                }, 1000);
                
            } else {
                feedback.className = 'mt-6 p-4 rounded-lg border-2 border-red-400 bg-red-900 bg-opacity-50 damage-animation';
                feedbackText.textContent = '💥 選擇錯誤，你被機器人攻擊，受到10點傷害!';
                feedbackText.className = 'font-bold mb-3 text-lg text-red-400';
                
                // 添加爆炸動畫效果
                gameInterface.classList.add('explosion-animation');
                setTimeout(() => {
                    gameInterface.classList.remove('explosion-animation');
                }, 1000);
            }
            
            explanationText.textContent = explanation;
            feedback.classList.remove('hidden');
        }

        // 下一題
        function nextQuestion() {
            gameState.currentQuestionIndex++;
            
            if (gameState.currentQuestionIndex >= gameState.totalQuestions) {
                endGame();
            } else {
                showQuestion();
                updateUI();
            }
        }

        // 更新UI
        function updateUI() {
            document.getElementById('currentQuestion').textContent = gameState.currentQuestionIndex + 1;
            document.getElementById('totalQuestions').textContent = gameState.totalQuestions;
            document.getElementById('currentHealth').textContent = gameState.health;
            
            // 更新血量條
            const healthPercentage = Math.max(0, (gameState.health / 100) * 100); // 最大血量可能超過50
            const healthBar = document.getElementById('healthBar');
            const healthText = document.getElementById('healthText');
            const battleStatus = document.getElementById('battleStatus');
            
            healthBar.style.width = Math.min(100, healthPercentage) + '%';
            
            // 根據血量改變顏色和文字
            if (gameState.health <= 0) {
                healthBar.className = 'health-bar bg-black h-6 rounded-full flex items-center justify-center text-white text-sm font-bold';
                healthText.textContent = '地球毀滅';
                battleStatus.textContent = '💀 地球已被機器人征服！';
                battleStatus.className = 'text-lg font-bold text-red-500';
            } else if (gameState.health < 30) {
                healthBar.className = 'health-bar bg-red-500 h-6 rounded-full flex items-center justify-center text-white text-sm font-bold';
                healthText.textContent = '危險';
                battleStatus.textContent = '🚨 AI機器人不斷攻擊，地球快毀滅了!';
                battleStatus.className = 'text-lg font-bold text-red-400';
            } else if (gameState.health < 60) {
                healthBar.className = 'health-bar bg-orange-500 h-6 rounded-full flex items-center justify-center text-white text-sm font-bold';
                healthText.textContent = '抗衡中';
                battleStatus.textContent = '⚔️ 你正努力與AI機器人抗衡，目前勉強撐得住!';
                battleStatus.className = 'text-lg font-bold text-orange-400';
            } else {
                healthBar.className = 'health-bar bg-green-500 h-6 rounded-full flex items-center justify-center text-white text-sm font-bold';
                healthText.textContent = '地球安全';
                battleStatus.textContent = '🛡️ 你暫時擊退AI機器人，地球目前安全!';
                battleStatus.className = 'text-lg font-bold text-green-400';
            }
        }

        // 顯示遊戲結束
        function showGameOver() {
            document.getElementById('gameInterface').classList.add('hidden');
            document.getElementById('gameOverPage').classList.remove('hidden');
            
            // 記錄結果
            saveGameResult();
        }

        // 結束遊戲
        function endGame() {
            // 記錄結果
            saveGameResult();
            
            // 顯示結果
            document.getElementById('gameInterface').classList.add('hidden');
            document.getElementById('resultsPage').classList.remove('hidden');
            
            document.getElementById('finalCorrect').textContent = gameState.correctAnswers;
            document.getElementById('finalWrong').textContent = gameState.wrongAnswers;
            document.getElementById('finalHealth').textContent = gameState.health;
            
            // 成就稱號
            const achievement = getAchievement(gameState.health);
            document.getElementById('achievementTitle').textContent = achievement.title;
            document.getElementById('achievementDesc').textContent = achievement.desc;
        }

        // 獲得成就
        function getAchievement(health) {
            if (health <= 0) return achievements.destroyed;
            if (health < 30) return achievements.survivor;
            if (health < 60) return achievements.defender;
            return achievements.hero;
        }

        // 保存遊戲結果
        function saveGameResult() {
            const result = {
                studentId: gameState.studentId,
                playerName: gameState.playerName,
                difficulty: gameState.currentDifficulty,
                finalHealth: gameState.health,
                correctAnswers: gameState.correctAnswers,
                wrongAnswers: gameState.wrongAnswers,
                totalQuestions: gameState.totalQuestions,
                startTime: gameState.startTime,
                endTime: new Date(),
                answers: gameState.answers,
                achievement: getAchievement(gameState.health).title
            };
            
            // 保存到本地存儲
            const results = JSON.parse(localStorage.getItem('gameResults') || '[]');
            results.push(result);
            localStorage.setItem('gameResults', JSON.stringify(results));
            
            // 發送到Google表單
            sendToGoogleForm(result);
        }

        // 發送到Apps Script資料庫
        function sendToGoogleForm(result) {
            // 替換成您的實際Apps Script URL
            const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyW5x_-cWwHF2PdR4Mt4C6H5bN_Lb3WvmJYUYhlDGyvXGPK9CREuQm8r1ISP_Q-XOUxEA/exec';
            
            // 準備要發送的資料
            const gameData = {
                studentId: result.studentId,
                playerName: result.playerName,
                difficulty: result.difficulty,
                finalHealth: result.finalHealth,
                correctAnswers: result.correctAnswers,
                wrongAnswers: result.wrongAnswers,
                achievement: result.achievement,
                startTime: result.startTime,
                endTime: result.endTime,
                totalQuestions: result.totalQuestions,
                answers: result.answers
            };
            
            // 發送資料到Apps Script
            fetch(APPS_SCRIPT_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(gameData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    console.log('✅ 學生成績已成功記錄到資料庫');
                    console.log('📊 記錄時間:', data.timestamp);
                } else {
                    console.log('❌ 資料傳送失敗:', data.message);
                }
            })
            .catch(error => {
                console.log('❌ 網路錯誤:', error);
                // 備用方案：儲存到本地
                console.log('💾 資料已儲存到本地備份');
            });
        }

        // 重新開始遊戲
        function restartGame() {
            document.getElementById('gameOverPage').classList.add('hidden');
            document.getElementById('mainMenu').classList.remove('hidden');
            document.getElementById('playerInfo').classList.remove('hidden');
            document.getElementById('difficultySelect').classList.add('hidden');
            
            // 重置遊戲狀態
            gameState = {
                currentDifficulty: '',
                currentQuestionIndex: 0,
                health: 50,
                correctAnswers: 0,
                wrongAnswers: 0,
                totalQuestions: 0,
                questions: [],
                playerName: '',
                studentId: '',
                startTime: null,
                answers: []
            };
        }

        // 返回主選單
        function backToMenu() {
            document.getElementById('resultsPage').classList.add('hidden');
            document.getElementById('mainMenu').classList.remove('hidden');
            document.getElementById('playerInfo').classList.remove('hidden');
            document.getElementById('difficultySelect').classList.add('hidden');
            
            // 重置遊戲狀態
            gameState = {
                currentDifficulty: '',
                currentQuestionIndex: 0,
                health: 50,
                correctAnswers: 0,
                wrongAnswers: 0,
                totalQuestions: 0,
                questions: [],
                playerName: '',
                studentId: '',
                startTime: null,
                answers: []
            };
        }

    </script>
</body>
</html>
    </script>
</body>
</html>
